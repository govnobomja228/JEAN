<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>Jean Smoke - –ú–∞–≥–∞–∑–∏–Ω</title>
<style>
body {
  font-family: 'Arial', sans-serif;
  background-image: url("https://i.pinimg.com/736x/6b/3e/84/6b3e84a1a62b6b6386a9cdffd3bbd63c.jpg");
  margin: 0;
  padding: 20px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  touch-action: manipulation;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

.error-message {
  color: #ff5555;
  text-align: center;
  padding: 20px;
  background: rgba(255, 85, 85, 0.1);
  border-radius: 8px;
  margin: 20px;
}

.header {
  display: flex;
  justify-content: flex-end;
  width: 100%;
  max-width: 1200px;
  margin-bottom: 20px;
  align-items: center;
  flex-wrap: wrap;
}

.glow-on-hover {
  width: 120px;
  height: 40px;
  border: none;
  outline: none;
  color: #fff;
  background: #111;
  cursor: pointer;
  position: relative;
  z-index: 0;
  border-radius: 10px;
  margin-left: 10px;
  margin-top: 10px;
  font-weight: bold;
}

.glow-on-hover:before {
  content: '';
  background: linear-gradient(45deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000);
  position: absolute;
  top: -2px;
  left:-2px;
  background-size: 400%;
  z-index: -1;
  filter: blur(5px);
  width: calc(100% + 4px);
  height: calc(100% + 4px);
  animation: glowing 20s linear infinite;
  opacity: 0;
  transition: opacity .3s ease-in-out;
  border-radius: 10px;
}

.glow-on-hover:hover:before {
  opacity: 1;
}

.user-id {
  color: white;
  margin-right: 15px;
  font-size: 1em;
  background: rgba(255,255,255,0.1);
  padding: 8px 15px;
  border-radius: 20px;
  font-weight: bold;
  flex-grow: 1;
  word-break: break-all;
  font-size: 0.9em;
}

@keyframes glowing {
  0% { background-position: 0 0; }
  50% { background-position: 400% 0; }
  100% { background-position: 0 0; }
}

.product-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
  width: 100%;
  max-width: 1200px;
}

.product-card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 10px;
  padding: 15px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
  display: flex;
  flex-direction: column;
}

.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
}

.product-image {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: 8px;
  margin-bottom: 10px;
}

.product-name {
  font-weight: bold;
  margin: 5px 0;
  color: white;
  font-size: 1.1em;
}

.product-price {
  color: #81d8d0;
  font-size: 1.3em;
  margin: 5px 0;
  font-weight: bold;
}

.counter-container {
  display: flex;
  align-items: center;
  margin-top: 10px;
  justify-content: center;
}

.qty-btn {
  width: 35px;
  height: 35px;
  border: none;
  background: #81d8d0;
  color: white;
  font-size: 1.5em;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

.quantity {
  margin: 0 15px;
  color: white;
  font-size: 1.2em;
  min-width: 30px;
  text-align: center;
}

.stock-info {
  color: #ccc;
  font-size: 0.9em;
  margin-top: 5px;
  text-align: center;
}

.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.9);
  overflow: auto;
}

.modal-content {
  background: rgba(0,0,0,0.9);
  margin: 5% auto;
  padding: 25px;
  border: 2px solid #81d8d0;
  width: 90%;
  max-width: 700px;
  border-radius: 15px;
  color: white;
  position: relative;
}

.close {
  color: #aaa;
  position: absolute;
  top: 15px;
  right: 20px;
  font-size: 32px;
  font-weight: bold;
  cursor: pointer;
}

.close:hover {
  color: white;
}

.order-item {
  border-bottom: 1px solid #333;
  padding: 15px 0;
  margin-bottom: 10px;
}

.order-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.order-id {
  font-size: 1.2em;
  font-weight: bold;
  color: #81d8d0;
}

.order-status {
  padding: 5px 12px;
  border-radius: 20px;
  font-weight: bold;
  font-size: 0.9em;
}

.status-processing {
  background: rgba(255, 165, 0, 0.2);
  color: #FFA500;
}

.status-delivery {
  background: rgba(30, 144, 255, 0.2);
  color: #1E90FF;
}

.status-waiting {
  background: rgba(153, 50, 204, 0.2);
  color: #9932CC;
}

.status-completed {
  background: rgba(50, 205, 50, 0.2);
  color: #32CD32;
}

.order-details {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 15px;
}

.order-items {
  background: rgba(255,255,255,0.05);
  padding: 10px;
  border-radius: 8px;
}

.order-item-row {
  display: flex;
  justify-content: space-between;
  padding: 5px 0;
}

.order-summary {
  background: rgba(255,255,255,0.05);
  padding: 10px;
  border-radius: 8px;
  text-align: right;
}

.order-total {
  font-size: 1.3em;
  font-weight: bold;
  color: #81d8d0;
  margin-top: 10px;
}

.empty-orders {
  text-align: center;
  padding: 30px;
  font-size: 1.2em;
  color: #81d8d0;
}

.loading {
  text-align: center;
  padding: 30px;
  font-size: 1.2em;
  color: #81d8d0;
}

.loading:after {
  content: ' .';
  animation: dots 1.5s infinite;
}

@keyframes dots {
  0%, 20% { content: ' .'; }
  40%, 60% { content: ' ..'; }
  80%, 100% { content: ' ...'; }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ */
.admin-panel {
  display: none;
  background: rgba(0,0,0,0.8);
  padding: 20px;
  border-radius: 10px;
  margin: 30px auto;
  width: 100%;
  max-width: 1200px;
  border: 2px solid #81d8d0;
}

.admin-panel h2 {
  color: #81d8d0;
  text-align: center;
  margin-top: 0;
}

.admin-controls {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  justify-content: center;
}

.admin-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}

.admin-table th, .admin-table td {
  padding: 12px;
  text-align: left;
  border-bottom: 1px solid rgba(129, 216, 208, 0.3);
}

.admin-table th {
  background-color: rgba(129, 216, 208, 0.1);
  color: #81d8d0;
}

.admin-input {
  width: 100%;
  padding: 8px;
  background: rgba(255,255,255,0.1);
  border: 1px solid #81d8d0;
  border-radius: 4px;
  color: white;
}

.admin-btn {
  padding: 8px 16px;
  background: #81d8d0;
  color: #111;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s;
}

.admin-btn:hover {
  background: #67c4b9;
  transform: translateY(-2px);
}

.admin-btn.delete {
  background: #ff5555;
  color: white;
}

.admin-btn.delete:hover {
  background: #ff3333;
}

.secret-admin-btn {
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 50px;
  height: 50px;
  background: rgba(129, 216, 208, 0.7);
  border: none;
  border-radius: 50%;
  color: white;
  font-size: 1.2em;
  font-weight: bold;
  cursor: pointer;
  z-index: 1000;
  display: none;
  box-shadow: 0 0 10px rgba(129, 216, 208, 0.5);
  transition: all 0.3s;
}

.secret-admin-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 0 15px rgba(129, 216, 208, 0.8);
}

.admin-code-modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.9);
}

.admin-code-content {
  background: rgba(0,0,0,0.9);
  margin: 15% auto;
  padding: 25px;
  border: 2px solid #81d8d0;
  width: 90%;
  max-width: 400px;
  border-radius: 15px;
  color: white;
  position: relative;
  text-align: center;
}

.admin-code-content h2 {
  color: #81d8d0;
  margin-top: 0;
}

.admin-code-form {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-top: 20px;
}

.admin-code-form input {
  padding: 12px;
  background: rgba(255,255,255,0.1);
  border: 1px solid #81d8d0;
  border-radius: 8px;
  color: white;
  font-size: 1.1em;
  text-align: center;
}

.admin-code-form button {
  padding: 12px;
  background: #81d8d0;
  color: #111;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  font-size: 1.1em;
}

.admin-error {
  color: #ff5555;
  margin-top: 10px;
  display: none;
}

/* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (max-width: 768px) {
  .header {
    flex-direction: column;
    align-items: stretch;
  }
  
  .user-id {
    margin: 10px 0;
    text-align: center;
    width: auto;
  }
  
  .glow-on-hover {
    width: 100%;
    margin: 5px 0;
  }
  
  .product-list {
    grid-template-columns: 1fr;
    gap: 15px;
  }
  
  .counter-container {
    justify-content: center;
  }
  
  .modal-content {
    width: 95%;
    margin: 10% auto;
    padding: 15px;
  }
  
  .secret-admin-btn {
    bottom: 10px;
    left: 10px;
    width: 40px;
    height: 40px;
    font-size: 1em;
  }
  
  .admin-panel {
    padding: 10px;
    margin: 15px 0;
  }
  
  .admin-table {
    font-size: 0.8em;
  }
  
  .admin-table th, .admin-table td {
    padding: 6px;
  }
  
  .order-details {
    grid-template-columns: 1fr;
  }
}

.status-history {
  margin-top: 15px;
  padding: 10px;
  background: rgba(255,255,255,0.05);
  border-radius: 8px;
}

.status-entry {
  display: flex;
  justify-content: space-between;
  padding: 5px 0;
  border-bottom: 1px solid #333;
}

.status-entry:last-child {
  border-bottom: none;
}

.status-date {
  color: #aaa;
}

/* –¶–≤–µ—Ç–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ */
.status-–≤-–æ–±—Ä–∞–±–æ—Ç–∫–µ {
  background: rgba(255, 165, 0, 0.2);
  color: #FFA500;
}

.status-–≤-—Å–±–æ—Ä–∫–µ {
  background: rgba(0, 191, 255, 0.2);
  color: #00BFFF;
}

.status-–≤-–ø—É—Ç–∏ {
  background: rgba(138, 43, 226, 0.2);
  color: #8A2BE2;
}

.status-–æ–∂–∏–¥–∞–µ—Ç-–ø–æ–ª—É—á–µ–Ω–∏—è {
  background: rgba(255, 215, 0, 0.2);
  color: #FFD700;
}

.status-–¥–æ—Å—Ç–∞–≤–ª–µ–Ω {
  background: rgba(50, 205, 50, 0.2);
  color: #32CD32;
}

.order-status {
  padding: 5px 10px;
  border-radius: 15px;
  font-weight: bold;
  font-size: 0.9em;
}

.status-processing {
  background-color: #FFF3CD;
  color: #856404;
}

.status-assembling {
  background-color: #D1ECF1;
  color: #0C5460;
}

.status-delivery {
  background-color: #D4EDDA;
  color: #155724;
}

.status-waiting {
  background-color: #E2E3E5;
  color: #383D41;
}

.status-delivered {
  background-color: #CCE5FF;
  color: #004085;
}

.order-card {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 15px;
  margin-bottom: 15px;
  border: 1px solid rgba(129, 216, 208, 0.3);
  transition: all 0.3s ease;
}

.order-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.order-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
}

.order-id {
  font-weight: bold;
  color: #81d8d0;
}

.order-date {
  color: #aaa;
  font-size: 0.9em;
}

.order-status {
  display: inline-block;
  padding: 5px 10px;
  border-radius: 20px;
  font-size: 0.8em;
  margin: 5px 0;
}

.order-status.–≤-–æ–±—Ä–∞–±–æ—Ç–∫–µ {
  background: rgba(255, 165, 0, 0.2);
  color: #ffa500;
}

.order-status.–¥–æ—Å—Ç–∞–≤–ª–µ–Ω {
  background: rgba(50, 205, 50, 0.2);
  color: #32cd32;
}

.order-total {
  font-size: 1.2em;
  font-weight: bold;
  margin: 10px 0;
}

.order-details-btn {
  background: rgba(129, 216, 208, 0.2);
  border: 1px solid #81d8d0;
  color: #81d8d0;
  padding: 8px 15px;
  border-radius: 5px;
  cursor: pointer;
  transition: all 0.3s;
}

.order-details-btn:hover {
  background: rgba(129, 216, 208, 0.4);
}

.empty-orders {
  text-align: center;
  padding: 30px;
  color: #81d8d0;
}

.empty-orders i {
  font-size: 2em;
  margin-bottom: 15px;
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX */
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 15px 20px;
  border-radius: 8px;
  color: white;
  font-weight: bold;
  z-index: 1001;
  animation: slideIn 0.3s ease;
}

.notification.success {
  background: #27ae60;
}

.notification.error {
  background: #e74c3c;
}

.notification.warning {
  background: #f39c12;
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.cart-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  background: #e74c3c;
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

.cart-btn-wrapper {
  position: relative;
  display: inline-block;
}

.search-container {
  width: 100%;
  max-width: 1200px;
  margin-bottom: 20px;
}

.search-input {
  width: 100%;
  padding: 12px 20px;
  background: rgba(255,255,255,0.1);
  border: 1px solid #81d8d0;
  border-radius: 25px;
  color: white;
  font-size: 1em;
  outline: none;
}

.search-input::placeholder {
  color: #ccc;
}

.filter-buttons {
  display: flex;
  gap: 10px;
  margin-top: 10px;
  flex-wrap: wrap;
}

.filter-btn {
  padding: 8px 16px;
  background: rgba(129, 216, 208, 0.2);
  border: 1px solid #81d8d0;
  color: #81d8d0;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s;
}

.filter-btn.active {
  background: #81d8d0;
  color: #111;
}

.filter-btn:hover {
  background: rgba(129, 216, 208, 0.4);
}

.stock-low {
  color: #ff6b6b;
  font-weight: bold;
}

.stock-medium {
  color: #feca57;
}

.stock-high {
  color: #1dd1a1;
}

.product-actions {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

.action-btn {
  flex: 1;
  padding: 8px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s;
}

.buy-now {
  background: #e74c3c;
  color: white;
}

.buy-now:hover {
  background: #c0392b;
}

.add-to-cart {
  background: #3498db;
  color: white;
}

.add-to-cart:hover {
  background: #2980b9;
}

.price-discount {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 5px 0;
}

.original-price {
  text-decoration: line-through;
  color: #ccc;
  font-size: 0.9em;
}

.discount-badge {
  background: #e74c3c;
  color: white;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 0.8em;
  font-weight: bold;
}

.product-rating {
  display: flex;
  align-items: center;
  gap: 5px;
  margin: 5px 0;
}

.star {
  color: #f39c12;
}

.rating-count {
  color: #ccc;
  font-size: 0.9em;
}

.product-features {
  list-style: none;
  padding: 0;
  margin: 10px 0;
}

.product-features li {
  color: #ccc;
  font-size: 0.9em;
  margin-bottom: 3px;
  padding-left: 15px;
  position: relative;
}

.product-features li:before {
  content: "‚úì";
  position: absolute;
  left: 0;
  color: #81d8d0;
}

.quick-view-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: rgba(0,0,0,0.7);
  color: white;
  border: none;
  border-radius: 5px;
  padding: 5px 10px;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.3s;
}

.product-card:hover .quick-view-btn {
  opacity: 1;
}

.quick-view-modal .modal-content {
  max-width: 800px;
}

.quick-view-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.quick-view-image {
  width: 100%;
  border-radius: 8px;
}

.quick-view-details h3 {
  color: #81d8d0;
  margin-top: 0;
}

@media (max-width: 768px) {
  .quick-view-content {
    grid-template-columns: 1fr;
  }
  
  .product-actions {
    flex-direction: column;
  }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
.stats-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin-bottom: 20px;
  width: 100%;
  max-width: 1200px;
}

.stat-card {
  background: rgba(255,255,255,0.1);
  padding: 15px;
  border-radius: 10px;
  text-align: center;
}

.stat-value {
  font-size: 2em;
  font-weight: bold;
  color: #81d8d0;
}

.stat-label {
  color: #ccc;
  font-size: 0.9em;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ */
.favorite-btn {
  position: absolute;
  top: 10px;
  left: 10px;
  background: none;
  border: none;
  font-size: 1.5em;
  cursor: pointer;
  color: #ccc;
  transition: color 0.3s;
}

.favorite-btn.active {
  color: #e74c3c;
}

.favorite-btn:hover {
  color: #e74c3c;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ */
.compare-btn {
  position: absolute;
  top: 50px;
  left: 10px;
  background: none;
  border: none;
  font-size: 1.2em;
  cursor: pointer;
  color: #ccc;
  transition: color 0.3s;
}

.compare-btn.active {
  color: #3498db;
}

.compare-btn:hover {
  color: #3498db;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∞–∫—Ü–∏–π –∏ —Å–∫–∏–¥–æ–∫ */
.sale-banner {
  position: absolute;
  top: 10px;
  right: 10px;
  background: #e74c3c;
  color: white;
  padding: 5px 10px;
  border-radius: 15px;
  font-size: 0.8em;
  font-weight: bold;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤ */
.rating-stars {
  display: flex;
  gap: 2px;
}

.rating-stars .star {
  font-size: 1em;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å—á–µ—Ç—á–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ */
.view-count {
  position: absolute;
  bottom: 10px;
  left: 10px;
  background: rgba(0,0,0,0.7);
  color: white;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 0.8em;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –º–µ—Ç–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ */
.product-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
  margin: 5px 0;
}

.product-tag {
  background: rgba(129, 216, 208, 0.2);
  color: #81d8d0;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 0.7em;
  font-weight: bold;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–π–º–µ—Ä–∞ –∞–∫—Ü–∏–∏ */
.sale-timer {
  background: #e74c3c;
  color: white;
  padding: 5px 10px;
  border-radius: 5px;
  font-size: 0.8em;
  font-weight: bold;
  margin: 5px 0;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ */
.stock-progress {
  width: 100%;
  height: 5px;
  background: rgba(255,255,255,0.2);
  border-radius: 5px;
  margin: 5px 0;
  overflow: hidden;
}

.stock-progress-bar {
  height: 100%;
  background: #81d8d0;
  transition: width 0.3s;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π */
.social-share {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

.social-btn {
  flex: 1;
  padding: 8px;
  border: none;
  border-radius: 5px;
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s;
}

.social-btn.telegram {
  background: #0088cc;
}

.social-btn.whatsapp {
  background: #25D366;
}

.social-btn.vk {
  background: #4C75A3;
}

.social-btn:hover {
  transform: translateY(-2px);
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ */
.view-history {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: rgba(0,0,0,0.9);
  border: 2px solid #81d8d0;
  border-radius: 10px;
  padding: 15px;
  max-width: 300px;
  z-index: 1000;
  display: none;
}

.view-history h3 {
  color: #81d8d0;
  margin-top: 0;
  margin-bottom: 10px;
}

.view-history-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 5px 0;
  border-bottom: 1px solid #333;
}

.view-history-item:last-child {
  border-bottom: none;
}

.view-history-image {
  width: 40px;
  height: 40px;
  object-fit: cover;
  border-radius: 5px;
}

.view-history-name {
  color: white;
  font-size: 0.9em;
  flex: 1;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–∫–∞–∑–∞ */
.quick-order-modal .modal-content {
  max-width: 500px;
}

.quick-order-form {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.quick-order-form input,
.quick-order-form select {
  padding: 12px;
  background: rgba(255,255,255,0.1);
  border: 1px solid #81d8d0;
  border-radius: 8px;
  color: white;
  font-size: 1em;
}

.quick-order-form button {
  padding: 12px;
  background: #81d8d0;
  color: #111;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  font-size: 1.1em;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ */
.skeleton-loader {
  background: linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

.skeleton-image {
  width: 100%;
  height: 200px;
  border-radius: 8px;
  margin-bottom: 10px;
}

.skeleton-text {
  height: 20px;
  border-radius: 4px;
  margin-bottom: 10px;
}

.skeleton-text.short {
  width: 60%;
}

.skeleton-button {
  height: 40px;
  border-radius: 20px;
  margin-top: 10px;
}
</style>
</head>
<body>

<div class="header">
  <div class="user-id">–í–∞—à ID: <span id="userId">–∑–∞–≥—Ä—É–∑–∫–∞...</span></div>
  <button class="glow-on-hover" id="myOrdersBtn">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</button>
  <div class="cart-btn-wrapper">
    <button class="glow-on-hover" id="cartBtn">–ö–æ—Ä–∑–∏–Ω–∞</button>
    <div class="cart-badge" id="cartBadge" style="display: none;">0</div>
  </div>
  <button class="glow-on-hover" id="contactBtn">–°–≤—è–∑–∞—Ç—å—Å—è</button>
  <button class="glow-on-hover" id="viewHistoryBtn" style="display: none;">–ò—Å—Ç–æ—Ä–∏—è</button>
</div>

<div class="stats-container" id="statsContainer" style="display: none;">
  <div class="stat-card">
    <div class="stat-value" id="totalProducts">0</div>
    <div class="stat-label">–¢–æ–≤–∞—Ä–æ–≤</div>
  </div>
  <div class="stat-card">
    <div class="stat-value" id="totalOrders">0</div>
    <div class="stat-label">–ó–∞–∫–∞–∑–æ–≤</div>
  </div>
  <div class="stat-card">
    <div class="stat-value" id="cartTotal">0</div>
    <div class="stat-label">–í –∫–æ—Ä–∑–∏–Ω–µ</div>
  </div>
  <div class="stat-card">
    <div class="stat-value" id="totalCost">0 ‚ÇΩ</div>
    <div class="stat-label">–û–±—â–∞—è —Å—É–º–º–∞</div>
  </div>
</div>

<div class="search-container">
  <input type="text" class="search-input" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...">
  <div class="filter-buttons">
    <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
    <button class="filter-btn" data-filter="price-low">–î–µ—à–µ–≤—ã–µ</button>
    <button class="filter-btn" data-filter="price-high">–î–æ—Ä–æ–≥–∏–µ</button>
    <button class="filter-btn" data-filter="stock">–í –Ω–∞–ª–∏—á–∏–∏</button>
    <button class="filter-btn" data-filter="sale">–°–æ —Å–∫–∏–¥–∫–æ–π</button>
    <button class="filter-btn" data-filter="popular">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ</button>
  </div>
</div>

<div class="product-list" id="productList">
  <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤</div>
</div>

<!-- –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –∞–¥–º–∏–Ω–∞ -->
<button class="secret-admin-btn" id="secretAdminBtn">A</button>

<!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
<div class="admin-panel" id="adminPanel">
  <h2>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
  <div class="admin-controls">
    <button class="admin-btn" id="refreshProductsBtn">–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
    <button class="admin-btn" id="addProductBtn">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
    <button class="admin-btn" id="exportDataBtn">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
    <button class="admin-btn" id="viewOrdersBtn">–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–æ–≤</button>
    <button class="admin-btn" id="manageStockBtn">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–æ–º</button>
  </div>
  <table class="admin-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th>–¶–µ–Ω–∞</th>
        <th>–û—Å—Ç–∞—Ç–æ–∫</th>
        <th>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
      </tr>
    </thead>
    <tbody id="adminProductsList"></tbody>
  </table>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫–∞–∑–æ–≤ -->
<div id="ordersModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2 style="text-align: center; color: #81d8d0; margin-bottom: 20px;">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h2>
    <div id="ordersList" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤...</div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∫–æ–¥–∞ –∞–¥–º–∏–Ω–∞ -->
<div id="adminCodeModal" class="admin-code-modal">
  <div class="admin-code-content">
    <span class="close">&times;</span>
    <h2>–î–æ—Å—Ç—É–ø –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
    <p>–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥</p>
    <div class="admin-code-form">
      <input type="password" id="adminCodeInput" placeholder="–ö–æ–¥ –¥–æ—Å—Ç—É–ø–∞" required>
      <div class="admin-error" id="adminCodeError"></div>
      <button id="submitAdminCodeBtn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
<div id="quickViewModal" class="modal">
  <div class="modal-content quick-view-modal">
    <span class="close">&times;</span>
    <div id="quickViewContent" class="quick-view-content">
      <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∑–∞–∫–∞–∑–æ–≤ -->
<div id="adminOrdersModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2 style="text-align: center; color: #81d8d0; margin-bottom: 20px;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏</h2>
    <div id="adminOrdersList" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤...</div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–∫–∞–∑–∞ -->
<div id="quickOrderModal" class="modal">
  <div class="modal-content quick-order-modal">
    <span class="close">&times;</span>
    <h2 style="text-align: center; color: #81d8d0; margin-bottom: 20px;">–ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑</h2>
    <div class="quick-order-form" id="quickOrderForm">
      <!-- –§–æ—Ä–º–∞ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
  </div>
</div>

<!-- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ -->
<div class="view-history" id="viewHistory">
  <h3>–ù–µ–¥–∞–≤–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ</h3>
  <div id="viewHistoryList"></div>
</div>

<script>
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ URL API –¥–ª—è Railway
const API_URL = window.location.origin;
const ADMIN_CODE = 'DanyaJEANsmoke';

console.log('API URL:', API_URL);

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
if (!localStorage.getItem('cartQuantities')) {
  localStorage.setItem('cartQuantities', JSON.stringify({}));
}
if (!localStorage.getItem('viewHistory')) {
  localStorage.setItem('viewHistory', JSON.stringify([]));
}
if (!localStorage.getItem('favorites')) {
  localStorage.setItem('favorites', JSON.stringify([]));
}

let products = [];
let cartQuantities = JSON.parse(localStorage.getItem('cartQuantities')) || {};
let viewHistory = JSON.parse(localStorage.getItem('viewHistory')) || [];
let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
let userId = localStorage.getItem('userId');
let currentFilter = 'all';
let searchQuery = '';

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
function initUser() {
  userId = localStorage.getItem('userId');
  
  if (!userId) {
    userId = 'user_' + Math.random().toString(36).substr(2, 9);
    localStorage.setItem('userId', userId);
  }
  
  document.getElementById('userId').textContent = userId;
  updateCartBadge();
  updateStats();
  loadViewHistory();
  return userId;
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–π–¥–∂–∞ –∫–æ—Ä–∑–∏–Ω—ã
function updateCartBadge() {
  const totalItems = Object.values(cartQuantities).reduce((sum, qty) => sum + qty, 0);
  const cartBadge = document.getElementById('cartBadge');
  
  if (totalItems > 0) {
    cartBadge.style.display = 'flex';
    cartBadge.textContent = totalItems;
  } else {
    cartBadge.style.display = 'none';
  }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
function updateStats() {
  const totalProducts = products.length;
  const totalInCart = Object.values(cartQuantities).reduce((sum, qty) => sum + qty, 0);
  const totalCost = Object.entries(cartQuantities).reduce((sum, [id, qty]) => {
    const product = products.find(p => p.id === id);
    return sum + (product ? product.price * qty : 0);
  }, 0);
  
  document.getElementById('totalProducts').textContent = totalProducts;
  document.getElementById('cartTotal').textContent = totalInCart;
  document.getElementById('totalCost').textContent = totalCost + ' ‚ÇΩ';
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–æ–≤–∞—Ä—ã
  document.getElementById('statsContainer').style.display = totalProducts > 0 ? 'grid' : 'none';
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
function loadViewHistory() {
  const historyList = document.getElementById('viewHistoryList');
  const viewHistoryBtn = document.getElementById('viewHistoryBtn');
  
  if (viewHistory.length === 0) {
    viewHistoryBtn.style.display = 'none';
    return;
  }
  
  viewHistoryBtn.style.display = 'block';
  historyList.innerHTML = '';
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
  const recentHistory = viewHistory.slice(-5).reverse();
  
  recentHistory.forEach(item => {
    const historyItem = document.createElement('div');
    historyItem.className = 'view-history-item';
    historyItem.innerHTML = `
      <img src="${item.image}" alt="${item.name}" class="view-history-image" onerror="this.src='https://via.placeholder.com/40?text=No+Image'">
      <div class="view-history-name">${item.name}</div>
      <button class="qty-btn" onclick="addToCartFromHistory('${item.id}')">+</button>
    `;
    historyList.appendChild(historyItem);
  });
}

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
function addToCartFromHistory(productId) {
  updateProductQuantity(productId, 1);
  showNotification('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!', 'success');
  renderProducts();
}

// –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
document.getElementById('viewHistoryBtn').addEventListener('click', () => {
  const viewHistory = document.getElementById('viewHistory');
  viewHistory.style.display = viewHistory.style.display === 'block' ? 'none' : 'block';
});

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
function addToViewHistory(product) {
  const existingIndex = viewHistory.findIndex(item => item.id === product.id);
  
  if (existingIndex !== -1) {
    viewHistory.splice(existingIndex, 1);
  }
  
  viewHistory.push({
    id: product.id,
    name: product.name,
    image: product.image,
    timestamp: Date.now()
  });
  
  // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é 20 —Ç–æ–≤–∞—Ä–∞–º–∏
  if (viewHistory.length > 20) {
    viewHistory.shift();
  }
  
  localStorage.setItem('viewHistory', JSON.stringify(viewHistory));
  loadViewHistory();
}

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω—ã–º
function toggleFavorite(productId) {
  const index = favorites.indexOf(productId);
  
  if (index === -1) {
    favorites.push(productId);
    showNotification('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ!', 'success');
  } else {
    favorites.splice(index, 1);
    showNotification('–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ!', 'warning');
  }
  
  localStorage.setItem('favorites', JSON.stringify(favorites));
  renderProducts();
}

// –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
function showNotification(message, type = 'success') {
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.textContent = message;
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.remove();
  }, 3000);
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
function checkAdminAccess() {
  const hasAccess = localStorage.getItem('adminAccess') === 'true';
  document.getElementById('secretAdminBtn').style.display = hasAccess ? 'block' : 'none';
  return hasAccess;
}

// –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
async function loadProducts() {
  try {
    showSkeletonLoader();
    const response = await fetch(`${API_URL}/api/products`);
    if (!response.ok) throw new Error('–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç');
    
    products = await response.json();
    renderProducts();
    
    // –ï—Å–ª–∏ –∞–¥–º–∏–Ω, –æ–±–Ω–æ–≤–ª—è–µ–º –ø–∞–Ω–µ–ª—å
    if (checkAdminAccess()) {
      updateAdminProductsList(products);
    }
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤:', error);
    document.getElementById('productList').innerHTML = '<div class="error-message">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.</div>';
  }
}

// –ü–æ–∫–∞–∑–∞—Ç—å —Å–∫–µ–ª–µ—Ç–æ–Ω-–∑–∞–≥—Ä—É–∑—á–∏–∫
function showSkeletonLoader() {
  const productList = document.getElementById('productList');
  productList.innerHTML = '';
  
  for (let i = 0; i < 8; i++) {
    const skeleton = document.createElement('div');
    skeleton.className = 'product-card skeleton-loader';
    skeleton.innerHTML = `
      <div class="skeleton-image skeleton-loader"></div>
      <div class="skeleton-text skeleton-loader"></div>
      <div class="skeleton-text short skeleton-loader"></div>
      <div class="skeleton-text skeleton-loader"></div>
      <div class="skeleton-button skeleton-loader"></div>
    `;
    productList.appendChild(skeleton);
  }
}

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
function filterProducts() {
  let filteredProducts = [...products];
  
  // –ü–æ–∏—Å–∫
  if (searchQuery) {
    filteredProducts = filteredProducts.filter(product =>
      product.name.toLowerCase().includes(searchQuery.toLowerCase())
    );
  }
  
  // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
  switch (currentFilter) {
    case 'price-low':
      filteredProducts.sort((a, b) => a.price - b.price);
      break;
    case 'price-high':
      filteredProducts.sort((a, b) => b.price - a.price);
      break;
    case 'stock':
      filteredProducts = filteredProducts.filter(product => product.stock > 0);
      break;
    case 'sale':
      // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ —Å–æ —Å–∫–∏–¥–∫–æ–π
      filteredProducts = filteredProducts.filter(product => product.discount);
      break;
    case 'popular':
      // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
      filteredProducts.sort((a, b) => (b.views || 0) - (a.views || 0));
      break;
  }
  
  return filteredProducts;
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
function renderProducts() {
  const productList = document.getElementById('productList');
  const filteredProducts = filterProducts();
  
  if (filteredProducts.length === 0) {
    productList.innerHTML = '<div class="empty-orders">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
    return;
  }
  
  productList.innerHTML = '';
  
  filteredProducts.forEach(product => {
    const card = document.createElement('div');
    card.className = 'product-card';
    
    const availableStock = product.stock - (cartQuantities[product.id] || 0);
    const stockClass = availableStock <= 5 ? 'stock-low' : availableStock <= 15 ? 'stock-medium' : 'stock-high';
    const stockPercentage = (availableStock / product.stock) * 100;
    const isFavorite = favorites.includes(product.id);
    const isInCart = cartQuantities[product.id] > 0;

    card.innerHTML = `
      <div style="position: relative;">
        <img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.src='https://via.placeholder.com/200?text=No+Image'">
        <button class="favorite-btn ${isFavorite ? 'active' : ''}" data-id="${product.id}">${isFavorite ? '‚ù§Ô∏è' : 'ü§ç'}</button>
        <button class="quick-view-btn" data-id="${product.id}">üëÅÔ∏è</button>
        ${product.discount ? `<div class="sale-banner">-${product.discount}%</div>` : ''}
        <div class="view-count">üëÅÔ∏è ${product.views || 0}</div>
      </div>
      <div class="product-name">${product.name}</div>
      ${product.discount ? `
        <div class="price-discount">
          <span class="original-price">${product.price} ‚ÇΩ</span>
          <span class="product-price">${Math.round(product.price * (1 - product.discount/100))} ‚ÇΩ</span>
          <span class="discount-badge">-${product.discount}%</span>
        </div>
      ` : `<div class="product-price">${product.price} ‚ÇΩ</div>`}
      <div class="stock-info ${stockClass}">–û—Å—Ç–∞–ª–æ—Å—å: ${availableStock}</div>
      <div class="stock-progress">
        <div class="stock-progress-bar" style="width: ${stockPercentage}%"></div>
      </div>
      <div class="product-rating">
        <span class="rating-stars">
          <span class="star">${'‚òÖ'.repeat(5)}</span>
        </span>
        <span class="rating-count">(${product.rating || 25})</span>
      </div>
      <div class="product-tags">
        <span class="product-tag">üî• –•–∏—Ç</span>
        <span class="product-tag">üöÄ –ù–æ–≤–∏–Ω–∫–∞</span>
      </div>
      <ul class="product-features">
        <li>–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ</li>
        <li>–ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</li>
        <li>–ì–∞—Ä–∞–Ω—Ç–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞</li>
      </ul>
      <div class="counter-container">
        <button class="qty-btn minus" data-id="${product.id}">‚àí</button>
        <div class="quantity" data-id="${product.id}">${cartQuantities[product.id] || 0}</div>
        <button class="qty-btn plus" data-id="${product.id}">+</button>
      </div>
      <div class="product-actions">
        <button class="action-btn buy-now" data-id="${product.id}">–ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å</button>
        <button class="action-btn add-to-cart" data-id="${product.id}">${isInCart ? '–í –∫–æ—Ä–∑–∏–Ω–µ' : '–í –∫–æ—Ä–∑–∏–Ω—É'}</button>
      </div>
      <div class="social-share">
        <button class="social-btn telegram" data-id="${product.id}">Telegram</button>
        <button class="social-btn whatsapp" data-id="${product.id}">WhatsApp</button>
        <button class="social-btn vk" data-id="${product.id}">VK</button>
      </div>
    `;
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ +/-
    card.querySelector('.plus').addEventListener('click', () => {
      updateProductQuantity(product.id, 1);
      renderProducts();
    });

    card.querySelector('.minus').addEventListener('click', () => {
      updateProductQuantity(product.id, -1);
      renderProducts();
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π
    card.querySelector('.buy-now').addEventListener('click', () => {
      openQuickOrder(product.id);
    });
    
    card.querySelector('.add-to-cart').addEventListener('click', () => {
      updateProductQuantity(product.id, 1);
      showNotification('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!', 'success');
      renderProducts();
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
    card.querySelector('.quick-view-btn').addEventListener('click', () => {
      openQuickView(product.id);
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
    card.querySelector('.favorite-btn').addEventListener('click', () => {
      toggleFavorite(product.id);
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
    card.querySelectorAll('.social-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        shareProduct(product.id, btn.classList[1]);
      });
    });
    
    productList.appendChild(card);
  });
  
  updateStats();
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞
function updateProductQuantity(productId, change) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  
  const available = product.stock - (cartQuantities[productId] || 0);
  
  if (change > 0 && available <= 0) {
    showNotification('–¢–æ–≤–∞—Ä –∑–∞–∫–æ–Ω—á–∏–ª—Å—è!', 'error');
    return;
  }
  
  if (change < 0 && (!cartQuantities[productId] || cartQuantities[productId] <= 0)) {
    return;
  }
  
  cartQuantities[productId] = (cartQuantities[productId] || 0) + change;
  
  if (cartQuantities[productId] <= 0) {
    delete cartQuantities[productId];
  }
  
  localStorage.setItem('cartQuantities', JSON.stringify(cartQuantities));
  updateCartBadge();
  updateStats();
}

// –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞
function openQuickView(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  
  addToViewHistory(product);
  
  const quickViewContent = document.getElementById('quickViewContent');
  const availableStock = product.stock - (cartQuantities[product.id] || 0);
  const isFavorite = favorites.includes(product.id);
  
  quickViewContent.innerHTML = `
    <div>
      <img src="${product.image}" alt="${product.name}" class="quick-view-image" onerror="this.src='https://via.placeholder.com/400?text=No+Image'">
    </div>
    <div class="quick-view-details">
      <h3>${product.name}</h3>
      <div class="product-price">${product.price} ‚ÇΩ</div>
      <div class="stock-info">–û—Å—Ç–∞–ª–æ—Å—å: ${availableStock} —à—Ç.</div>
      <div class="product-rating">
        <span class="star">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
        <span class="rating-count">(25 –æ—Ç–∑—ã–≤–æ–≤)</span>
      </div>
      <p>–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç —Å –±—ã—Å—Ç—Ä–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π. –ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π.</p>
      <div class="counter-container">
        <button class="qty-btn minus" data-id="${product.id}">‚àí</button>
        <div class="quantity" data-id="${product.id}">${cartQuantities[product.id] || 0}</div>
        <button class="qty-btn plus" data-id="${product.id}">+</button>
      </div>
      <div class="product-actions">
        <button class="action-btn buy-now" data-id="${product.id}">–ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å</button>
        <button class="action-btn add-to-cart" data-id="${product.id}">–í –∫–æ—Ä–∑–∏–Ω—É</button>
      </div>
      <button class="favorite-btn ${isFavorite ? 'active' : ''}" data-id="${product.id}" style="margin-top: 10px;">
        ${isFavorite ? '‚ù§Ô∏è –í –∏–∑–±—Ä–∞–Ω–Ω–æ–º' : 'ü§ç –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ'}
      </button>
    </div>
  `;
  
  // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
  quickViewContent.querySelector('.plus').addEventListener('click', () => {
    updateProductQuantity(productId, 1);
    openQuickView(productId); // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä
  });
  
  quickViewContent.querySelector('.minus').addEventListener('click', () => {
    updateProductQuantity(productId, -1);
    openQuickView(productId); // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä
  });
  
  quickViewContent.querySelector('.favorite-btn').addEventListener('click', () => {
    toggleFavorite(productId);
    openQuickView(productId); // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä
  });
  
  quickViewContent.querySelector('.buy-now').addEventListener('click', () => {
    openQuickOrder(productId);
  });
  
  quickViewContent.querySelector('.add-to-cart').addEventListener('click', () => {
    updateProductQuantity(productId, 1);
    showNotification('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!', 'success');
    openQuickView(productId); // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä
  });
  
  document.getElementById('quickViewModal').style.display = 'block';
}

// –ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑
function openQuickOrder(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  
  const quickOrderForm = document.getElementById('quickOrderForm');
  quickOrderForm.innerHTML = `
    <input type="text" placeholder="–í–∞—à–µ –∏–º—è" required>
    <input type="tel" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
    <input type="text" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏" required>
    <select required>
      <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏</option>
      <option value="1">1 —á–∞—Å (—ç–∫—Å–ø—Ä–µ—Å—Å)</option>
      <option value="2">2 —á–∞—Å–∞</option>
      <option value="3">3 —á–∞—Å–∞</option>
    </select>
    <input type="text" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É">
    <div style="text-align: center; margin: 10px 0;">
      <strong>–¢–æ–≤–∞—Ä:</strong> ${product.name}<br>
      <strong>–¶–µ–Ω–∞:</strong> ${product.price} ‚ÇΩ<br>
      <strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> ${cartQuantities[productId] || 1}
    </div>
    <button type="submit">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
  `;
  
  quickOrderForm.onsubmit = async (e) => {
    e.preventDefault();
    // –ó–¥–µ—Å—å –ª–æ–≥–∏–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–∫–∞–∑–∞
    showNotification('–ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω!', 'success');
    document.getElementById('quickOrderModal').style.display = 'none';
  };
  
  document.getElementById('quickOrderModal').style.display = 'block';
}

// –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ç–æ–≤–∞—Ä–æ–º
function shareProduct(productId, platform) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  
  const text = `–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä: ${product.name} –∑–∞ ${product.price} ‚ÇΩ`;
  const url = window.location.href;
  
  let shareUrl = '';
  switch (platform) {
    case 'telegram':
      shareUrl = `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;
      break;
    case 'whatsapp':
      shareUrl = `https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`;
      break;
    case 'vk':
      shareUrl = `https://vk.com/share.php?url=${encodeURIComponent(url)}&title=${encodeURIComponent(text)}`;
      break;
  }
  
  window.open(shareUrl, '_blank');
  showNotification('–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ ' + platform, 'success');
}

// –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
document.getElementById('searchInput').addEventListener('input', (e) => {
  searchQuery = e.target.value;
  renderProducts();
});

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
document.querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentFilter = btn.dataset.filter;
    renderProducts();
  });
});

// –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ (–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å, –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, –∑–∞–∫–∞–∑—ã) –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–∞–∫–∏–º –∂–µ, –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –æ—Ç–≤–µ—Ç–µ
// [–ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Å—Ç–∞–ª—å–Ω–æ–π JavaScript –∫–æ–¥ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞]

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
initUser();
loadProducts();

// –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
async function loadOrdersCount() {
  try {
    const response = await fetch(`${API_URL}/api/orders?email=${userId}`);
    if (response.ok) {
      const orders = await response.json();
      document.getElementById('totalOrders').textContent = orders.length;
    }
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–∫–∞–∑–æ–≤:', error);
  }
}

loadOrdersCount();
</script>
</body>
</html>